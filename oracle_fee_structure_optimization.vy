// Refactor contract state machine design
// Enhance contract event handling
